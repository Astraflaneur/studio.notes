<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="author" content="Sagar Barad">
  <meta name="description" content="Studio Notes: Reflections on art, life, and quiet experiments by Sagar Barad.">
  <title>Studio Notes by Sagar Barad</title>

  <link rel="shortcut icon" href="images/favicon/favicon.ico" type="image/x-icon">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="stylesheet.css">

</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <h1>Studio Notes</h1>
        <p>Reflections on art, life, and quiet experiments</p>
      </div>

      <nav>
        <a data-page="home" class="active">Home</a>
        <a data-page="essays">Essays</a>
        <a data-page="now">Now</a>
        <a data-page="about">About</a>
        <a class="cta" data-page="compose" href="#">Write</a>

<!-- Modal -->
      <div id="writeOverlay" aria-hidden="true">
        <div class="write-modal" role="dialog" aria-modal="true" style="position:relative;">
          <button id="closeWrite" class="close-btn" aria-label="Close">✕</button>
          <h2 style="margin-top:0">Write or Scratch</h2>

          <div class="mode-tabs">
            <button class="tab active" data-mode="text">Fragment</button>
            <button class="tab" data-mode="draw">Scribble</button>
          </div>

          <div id="textMode" class="mode active">
            <textarea id="oneLiner" maxlength="120" placeholder="I am thinking about..."></textarea>
            <div class="controls">
              <button id="downloadText" class="btn primary">Download as PNG</button>
            </div>
          </div>

          <div id="drawMode" class="mode" style="display:none;">
            <canvas id="drawCanvas" width="800" height="360"></canvas>
            <div class="controls">
              <button id="clearCanvas" class="btn">Clear</button>
              <button id="downloadCanvas" class="btn primary">Download drawing</button>
            </div>
          </div>

        </div>
      </div>

      </nav>
    </header>

    <main>
      <section>
        <div id="home" class="page active">
          <div class="featured">
            <div class="eyebrow">Featured</div>
            <h2 id="featuredTitle">Fragments, Not Finished Things</h2>
            <p class="lede" id="featuredLede">No one ever tells you how much of life is half-done. I’ve come to see that my work is rarely finished, 
              only fragmentary i.e. drafts, sketches, half-thoughts that never close but together form a texture of practice. Meaning doesn’t arrive
               as a final word, but in the fragments we choose to carry forward.</p>
          </div>

          <div class="posts" id="posts">
            <!-- posts injected by JS -->
          </div>
        </div>

        <div id="essays" class="page">
          <h2>Essays</h2>
          <p class="small">Longer pieces and reflections.</p>
          <div id="essaysList"></div>
        </div>

        <div id="sketches" class="page">
          <h2>Sketches</h2>
          <p class="small">Shorter notes, images, and experiments.</p>
          <div id="sketchesList"></div>
        </div>

        <div id="now" class="page">
          <h2>Now</h2>
          <div class="intro">
            <p>Inspired by <a href="https://nownownow.com/" target="_blank" rel="noopener">nownownow.com</a>, here’s a snapshot of what I’m currently exploring, reading, and thinking about. 
              This is a living list that changes often, reflecting the ebb and flow of my interests and projects.</p>
            <p>Why share this? Because I believe in the value of transparency and the joy of shared curiosity. 
              By making my current pursuits visible, I hope to connect with others who might be exploring similar paths or who are simply curious about the process behind the work.</p>
            <p><em>Note: This list is a snapshot in time and may not represent all my ongoing interests or projects.</em></p>
          </div>
          
          <div class="now-list">
          <h3>What I’m up to these days:</h3>
          <ul>
            <li>Getting back into running; slow, but steadier than before.</li>
            <li>Practicing typing (hovering around 92 wpm, aiming for 100).</li>
            <li>Reading <em>The Left Hand of Darkness</em> by Ursula K. Le Guin.</li>
            <li>Filling a sketchbook with quick ink drawings.</li>
            <li>Learning bits of harmonica and keyboard.</li>
            <li>Jotting down small notes and fragments of essays.</li>
          </ul>
        </div>
        </div>

        <div id="about" class="page">
        <h2>About Me</h2>
        
        <div class="intro">
          <p>
            This site is a snapshot of the messy, ongoing things I’m trying, 
            failing at, and slowly learning from. I started reading and writing 
            later than I would have liked, so what you’ll find here are mostly 
            fragments; half-baked observations on art, research, and life, 
            alongside small experiments that don’t always lead anywhere but 
            leave traces worth keeping.
          </p>
          
          <p>
            Why call this <em>Studio Notes</em>? Because I think of my work (and life) 
            less like a finished gallery and more like a studio, full of drafts, 
            sketches, revisions, and scraps that show the process as much as the 
            product. These are notes to myself, but also an open sketchbook for 
            anyone who happens to wander in.
          </p>
        </div>
      </div>


  <aside>
    <div class="about-card">
      <h3>Studio Notes</h3>
      <p>I collect fragments: walks, failed drafts, photos, and recipes for afternoon tea. This sidebar shows a small gallery pulled from recent posts.</p>

      <div style="margin-top:14px">
        <strong style="font-size:13px">Gallery</strong>
        <button class="morebtn" id="showMoreBtn" aria-expanded="false" style="margin-bottom:10px">Show more</button>
        <div class="gallery" id="gallery">
          <!-- Replace src paths with your images; data-full can point to larger versions if you have them -->
          <figure><img src="./images/Gallery/digi-cam-1.png" alt="sample 1" loading="lazy" data-full="./images/Gallery/digi-cam-1.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-2.png" alt="sample 2" loading="lazy" data-full="./images/Gallery/digi-cam-2.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-3.png" alt="sample 3" loading="lazy" data-full="./images/Gallery/digi-cam-3.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-4.png" alt="sample 4" loading="lazy" data-full="./images/Gallery/digi-cam-4.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-5.png" alt="sample 5" loading="lazy" data-full="./images/Gallery/digi-cam-5.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-6.png" alt="sample 6" loading="lazy" data-full="./images/Gallery/digi-cam-6.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-7.png" alt="sample 7" loading="lazy" data-full="./images/Gallery/digi-cam-7.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-8.png" alt="sample 8" loading="lazy" data-full="./images/Gallery/digi-cam-8.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-9.png" alt="sample 9" loading="lazy" data-full="./images/Gallery/digi-cam-9.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-10.png" alt="sample 10" loading="lazy" data-full="./images/Gallery/digi-cam-10.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-11.png" alt="sample 11" loading="lazy" data-full="./images/Gallery/digi-cam-11.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-12.png" alt="sample 12" loading="lazy" data-full="./images/Gallery/digi-cam-12.png"></figure>
          <figure><img src="./images/Gallery/digi-cam-14.png" alt="sample 14" loading="lazy" data-full="./images/Gallery/digi-cam-14.png"></figure>
        </div>
      </div>
    </div>
  </aside>

      <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
    <div class="lightbox__imgwrap">
      <img id="lightboxImg" alt="Expanded image" />
      <div class="lightbox__nav">
        <button class="iconbtn" id="prevBtn" aria-label="Previous image">&#9664;</button>
        <button class="iconbtn" id="nextBtn" aria-label="Next image">&#9654;</button>
      </div>
      <div class="lightbox__close">
        <button class="iconbtn" id="closeBtn" aria-label="Close">&times;</button>
      </div>
    </div>
  </div>

    </main>

      <footer>
        © <span id="year"></span> Studio Notes by Sagar Barad
      </footer>
    </div>

    <div id="overlay" class="overlay" role="dialog" aria-hidden="true">
      <div class="article-modal" id="articleModal">
        <button class="close-btn" id="closeModal" aria-label="Close">✕</button>
        <article id="modalContent"></article>
      </div>
    </div>

<script src="scripts.js"></script>
 <script>
    (function(){
      const gallery = document.getElementById('gallery');
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightboxImg');
      const closeBtn = document.getElementById('closeBtn');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');

      const figures = Array.from(gallery.querySelectorAll('figure'));
      const imgs = figures.map(f => f.querySelector('img'));
      let index = 0;

      function openAt(i){
        index = i;
        const img = imgs[index];
        const full = img.getAttribute('data-full') || img.src;
        lbImg.src = full; lbImg.alt = img.alt || 'image';
        lb.classList.add('open');
        lb.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }
      function close(){
        lb.classList.remove('open');
        lb.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        // Prevent stale flashes when reopening a different image quickly
        setTimeout(() => { lbImg.removeAttribute('src'); }, 150);
      }
      function next(){ openAt((index + 1) % imgs.length); }
      function prev(){ openAt((index - 1 + imgs.length) % imgs.length); }

      figures.forEach((fig, i) => {
        fig.addEventListener('click', () => openAt(i));
        fig.addEventListener('keydown', (e) => { if(e.key==='Enter' || e.key===' ') { e.preventDefault(); openAt(i); } });
        fig.setAttribute('tabindex', '0');
        fig.setAttribute('role', 'button');
        fig.setAttribute('aria-label', 'Open image ' + (i+1));
      });

      lb.addEventListener('click', (e) => { if(e.target === lb) close(); });
      closeBtn.addEventListener('click', close);
      nextBtn.addEventListener('click', next);
      prevBtn.addEventListener('click', prev);

      document.addEventListener('keydown', (e) => {
        if(lb.classList.contains('open')){
          if(e.key === 'Escape') close();
          if(e.key === 'ArrowRight') next();
          if(e.key === 'ArrowLeft') prev();
        }
      });
    })();
  </script>

  <script>
  (function(){
    const gallery   = document.getElementById('gallery');
    const lb        = document.getElementById('lightbox');
    const lbImg     = document.getElementById('lightboxImg');
    const closeBtn  = document.getElementById('closeBtn');
    const prevBtn   = document.getElementById('prevBtn');
    const nextBtn   = document.getElementById('nextBtn');
    const showMoreBtn = document.getElementById('showMoreBtn');

    // ---- click-tracking helpers ----
    const CLICK_KEY_PREFIX = 'galleryClicks:';
    function getClickCount(key){
      const n = localStorage.getItem(CLICK_KEY_PREFIX + key);
      return n ? parseInt(n, 10) : 0;
    }
    function addClick(key){
      const n = getClickCount(key) + 1;
      localStorage.setItem(CLICK_KEY_PREFIX + key, String(n));
    }

    // ---- sort figures by popularity (desc) and rebuild DOM ----
    let figures = Array.from(gallery.querySelectorAll('figure'));
    figures.sort((a,b) => {
      const ia = a.querySelector('img'); const ib = b.querySelector('img');
      const ka = ia.getAttribute('data-full') || ia.getAttribute('src') || '';
      const kb = ib.getAttribute('data-full') || ib.getAttribute('src') || '';
      return getClickCount(kb) - getClickCount(ka);
    });
    figures.forEach(f => gallery.appendChild(f));
    let imgs = figures.map(f => f.querySelector('img'));

    // ---- lightbox ----
    let index = 0;
    function openAt(i){
      index = i;
      const img  = imgs[index];
      const full = img.getAttribute('data-full') || img.src;
      lbImg.src = full; lbImg.alt = img.alt || 'image';
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }
    function close(){
      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      setTimeout(()=>{ lbImg.removeAttribute('src'); }, 150);
    }
    function next(){ openAt((index + 1) % imgs.length); }
    function prev(){ openAt((index - 1 + imgs.length) % imgs.length); }

    // ---- wire up figures (count clicks on figure open only) ----
    figures.forEach((fig, i) => {
      fig.addEventListener('click', () => {
        const key = imgs[i].getAttribute('data-full') || imgs[i].src;
        addClick(key);
        openAt(i);
      });
      fig.addEventListener('keydown', (e) => {
        if(e.key==='Enter' || e.key===' ') {
          e.preventDefault();
          const key = imgs[i].getAttribute('data-full') || imgs[i].src;
          addClick(key);
          openAt(i);
        }
      });
      fig.setAttribute('tabindex','0');
      fig.setAttribute('role','button');
      fig.setAttribute('aria-label','Open image ' + (i+1));
    });

    lb.addEventListener('click', (e) => { if(e.target === lb) close(); });
    closeBtn.addEventListener('click', close);
    nextBtn.addEventListener('click', next);
    prevBtn.addEventListener('click', prev);
    document.addEventListener('keydown', (e) => {
      if(lb.classList.contains('open')){
        if(e.key === 'Escape') close();
        if(e.key === 'ArrowRight') next();
        if(e.key === 'ArrowLeft')  prev();
      }
    });

    // ---- show more (top button) ----
    const initialCount = 6;  // show at first
    const batchSize    = 6;  // reveal per click

    function updateMoreButton(){
      const hiddenCount = figures.filter(f => f.classList.contains('is-hidden')).length;
      if(hiddenCount === 0){
        showMoreBtn.style.display = 'none';
        showMoreBtn.setAttribute('aria-expanded','true');
      } else {
        showMoreBtn.style.display = '';
        showMoreBtn.textContent = `Show more (${hiddenCount})`;
        showMoreBtn.setAttribute('aria-expanded','false');
      }
    }

    figures.forEach((fig, i) => { if(i >= initialCount) fig.classList.add('is-hidden'); });
    updateMoreButton();

    showMoreBtn.addEventListener('click', () => {
      let revealed = 0;
      for(let i=0; i<figures.length && revealed<batchSize; i++){
        const fig = figures[i];
        if(fig.classList.contains('is-hidden')){
          fig.classList.remove('is-hidden');
          revealed++;
        }
      }
      updateMoreButton();
    });
  })();
</script>


</body>
</html>
